"use strict";const arrows=document.querySelectorAll(".js-arrow"),creationBtn=document.querySelector(".js-buttoncreate"),collapsibleSections=document.querySelectorAll(".js-section"),buttons=document.querySelectorAll(".js-input-design"),cardName=document.querySelector(".js-previewname"),form=document.querySelector(".js-form"),cardJob=document.querySelector(".js-previewjob"),cardEmail=document.querySelector(".js-linkEmail"),cardTel=document.querySelector(".js-linkTel"),cardLinkedin=document.querySelector(".js-linkIn"),cardGitHub=document.querySelector(".js-linkGit"),resetButton=document.querySelector(".js-reset-button");function handleCollapsibles(e){let t=e.target.closest(".js-section");for(const e of collapsibleSections)console.log(e),t===e?e.classList.toggle("active"):e.classList.remove("active")}for(const e of arrows)e.addEventListener("click",handleCollapsibles);function changecolor(){const e=document.querySelector(".js-input-design:checked"),t=document.querySelector(".js-card");t.classList.remove("js-color-blue"),t.classList.remove("js-color-orange"),e===buttons[0]||(e===buttons[1]?t.classList.add("js-color-orange"):e===buttons[2]&&t.classList.add("js-color-blue"))}changecolor();for(let e=0;e<buttons.length;e++){buttons[e].addEventListener("click",changecolor)}const userData={name:"",job:"",email:"",linkedin:"",phone:"",github:"",palette:1,photo:""};function handleChangeForm(e){const t=e.target.value,r=e.target.name;userData[r]=t,paintFormInCard()}function paintFormInCard(){""===userData.name?cardName.innerHTML="Nombre Apellidos":cardName.innerHTML=userData.name,""===userData.job?cardJob.innerHTML="Front end developer":cardJob.innerHTML=userData.job,cardEmail.href="mailto:"+userData.email,cardTel.href="tel:"+userData.phone,cardLinkedin.href="https://linkedin.com/in/"+userData.linkedin,cardGitHub.href="https://github.com/"+userData.gitHub}function handleResetButton(){form.reset(),userData.name="",userData.job="",userData.email="",userData.linkedin="",userData.phone="",userData.github="",userData.palette=1,userData.photo="",console.log(userData),paintFormInCard(),paintPhotoInCard(),buttons[0].checked=!0,changecolor()}form.addEventListener("change",handleChangeForm),resetButton.addEventListener("click",handleResetButton);const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){userData.photo=fr.result,paintPhotoInCard()}function paintPhotoInCard(){""===userData.photo?(profileImage.style.backgroundImage="",profilePreview.style.backgroundImage=""):(profileImage.style.backgroundImage=`url(${userData.photo})`,profilePreview.style.backgroundImage=`url(${userData.photo})`)}function fakeFileClick(){fileField.click()}function createMessageError(e){creationBtn.classList.add("errorButtonPress");const t=document.createElement("p");document.querySelector(".js-errorcontainer").appendChild(t);const r=document.createTextNode("Debes rellenar "+e);t.appendChild(r),t.setAttribute("class","CardCreated-a")}function handleButtonClickCreate(e){""===userData.name?createMessageError("el nombre"):""===userData.job?createMessageError("la profesion"):""===userData.email?createMessageError("el email"):""===userData.linkedin?createMessageError("el perfil de LinkedIn"):""===userData.phone?createMessageError("el telefono"):""===userData.github?createMessageError("el perfil de Github"):fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",mode:"cors",body:JSON.stringify(userData)}).then(e=>e.json()).then(t=>{if(!1===t.success)createMessageError("todos los campos");else{e.target.closest(".collapsible").classList.toggle("showLink")}})}fileField.addEventListener("change",getImage),creationBtn.addEventListener("click",handleButtonClickCreate);